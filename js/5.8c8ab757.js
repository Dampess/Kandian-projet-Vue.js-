"use strict";(self["webpackChunkclone_streaming"]=self["webpackChunkclone_streaming"]||[]).push([[5],{5:function(e,s,l){l.r(s),l.d(s,{default:function(){return v}});var t=l(6768),n=l(4232),r=l(5130);const i={class:"mt-6 w-11/12 mx-auto"},o={class:"flex flex-row"},a=(0,t.Lk)("h1",{class:"text-4xl font-bold mb-6 ml-4"},"Séries",-1),c={class:"genre-menu ml-4 mt-4 mb-6 w-90 h-full text-black"},d=["value"],u={class:"grid grid-cols-1 gap-4"},h={class:"text-2xl text-gray-900 font-semibold mb-4 ml-8 text-gray-900"},g=["src","alt","onClick"];function p(e,s,l,p,m,f){const k=(0,t.g2)("SkeletonLoader"),S=(0,t.g2)("TheModal");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(k,{loading:m.loading},null,8,["loading"]),(0,t.Lk)("div",o,[a,(0,t.Lk)("div",c,[(0,t.bo)((0,t.Lk)("select",{class:"bg-gray-200 opacity-50 rounded-l-full rounded-r-full w-8/12 mt-2",id:"genreSelect","onUpdate:modelValue":s[0]||(s[0]=e=>m.selectedGenre=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(m.genres,((e,s)=>((0,t.uX)(),(0,t.CE)("option",{key:s,value:e.id},(0,n.v_)(e.name),9,d)))),128))],512),[[r.u1,m.selectedGenre]])])]),(0,t.Lk)("ul",u,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(m.genres,((e,s)=>(0,t.bo)(((0,t.uX)(),(0,t.CE)("li",{key:s,class:"mb-8"},[(0,t.Lk)("h2",h,(0,n.v_)(e.name),1),(0,t.Lk)("ul",{class:(0,n.C4)(["grid grid-cols-4 gap-2 ml-1 mr-1",{"grid-cols-2":m.isSmallScreen}])},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.series,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e.id,class:"flex flex-col items-center rounded-lg shadow-lg p-2 hover:bg-gray-500 transition duration-300 ease-in-out relative"},[(0,t.Lk)("img",{src:"https://image.tmdb.org/t/p/w500/"+e.backdrop_path,alt:e.name,class:"series-poster rounded-lg cursor-pointer",onClick:s=>f.showSeriesDetails(e)},null,8,g)])))),128))],2)])),[[r.aG,m.selectedGenre===e.id]]))),128))]),m.selectedSeries?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"modal-overlay",onClick:s[2]||(s[2]=(...e)=>f.closeModal&&f.closeModal(...e))},[(0,t.Lk)("div",{class:"modal-content",onClick:s[1]||(s[1]=(0,r.D$)((()=>{}),["stop"]))},[(0,t.bF)(S,{series:m.selectedSeries,isModalOpen:m.isModalOpen,onClose:f.closeModal},null,8,["series","isModalOpen","onClose"])])])):(0,t.Q3)("",!0)])}l(4114);var m=l(943),f=l(870),k={components:{TheModal:m.A,SkeletonLoader:f.A},data(){return{genres:[],selectedGenre:null,selectedSeries:null,isModalOpen:!1,isSmallScreen:!1,loading:!0}},beforeUnmount(){window.removeEventListener("resize",this.checkScreenSize)},async mounted(){this.fetchGenres(),this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},methods:{async fetchGenres(){try{const e="3a18f97e67628cff439f21ac383dd600",s=await fetch(`https://api.themoviedb.org/3/genre/tv/list?api_key=${e}&language=fr`),l=await s.json();if(l.genres&&l.genres.length>0){for(const s of l.genres){const l=await this.fetchSeriesForGenre(s.id,e);this.genres.push({id:s.id,name:s.name,series:l})}this.genres.length>0&&(this.selectedGenre=this.genres[0].id),this.loading=!1}}catch(e){console.error("Erreur lors de la récupération des genres et des séries associées :",e)}},async fetchSeriesForGenre(e,s){const l=[];for(let t=1;t<=10;t++){const n=await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${s}&language=fr&with_genres=${e}&page=${t}`),r=await n.json();if(!r.results||0===r.results.length)break;const i=r.results.filter((e=>e.backdrop_path));l.push(...i)}return l},showSeriesDetails(e){this.selectedSeries=e,this.isModalOpen=!0},closeModal(){this.selectedSeries=null,this.isModalOpen=!1},filteredSeries(e){return e.filter((e=>e.backdrop_path))},checkScreenSize(){this.isSmallScreen=window.innerWidth<=763}}},S=l(1241);const b=(0,S.A)(k,[["render",p]]);var v=b}}]);
//# sourceMappingURL=5.8c8ab757.js.map