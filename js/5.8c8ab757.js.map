{"version":3,"file":"js/5.8c8ab757.js","mappings":"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","sources":["webpack://clone-streaming/./src/views/SeriesAffichage.vue","webpack://clone-streaming/./src/views/SeriesAffichage.vue?9299"],"sourcesContent":["<template>\n  <div class=\"mt-6 w-11/12 mx-auto\">\n    <SkeletonLoader :loading=\"loading\" />\n    <div class=\"flex flex-row\">\n      <h1 class=\"text-4xl font-bold mb-6 ml-4\">Séries</h1>\n      <div class=\"genre-menu ml-4 mt-4 mb-6 w-90 h-full text-black\">\n        <select class=\"bg-gray-200 opacity-50 rounded-l-full rounded-r-full w-8/12 mt-2\" id=\"genreSelect\"\n          v-model=\"selectedGenre\">\n          <option v-for=\"(genre, index) in genres\" :key=\"index\" :value=\"genre.id\">{{ genre.name }}</option>\n        </select>\n      </div>\n    </div>\n    <ul class=\"grid grid-cols-1 gap-4\">\n      <li v-for=\"(genre, index) in genres\" :key=\"index\" v-show=\"selectedGenre === genre.id\" class=\"mb-8\">\n        <h2 class=\"text-2xl text-gray-900 font-semibold mb-4 ml-8 text-gray-900\">{{ genre.name }}</h2>\n        <ul class=\"grid grid-cols-4 gap-2 ml-1 mr-1\" :class=\"{ 'grid-cols-2': isSmallScreen }\">\n          <li v-for=\"series in genre.series\" :key=\"series.id\"\n            class=\"flex flex-col items-center rounded-lg shadow-lg p-2 hover:bg-gray-500 transition duration-300 ease-in-out relative\">\n            <img :src=\"'https://image.tmdb.org/t/p/w500/' + series.backdrop_path\" :alt=\"series.name\"\n              class=\"series-poster rounded-lg cursor-pointer\" @click=\"showSeriesDetails(series)\">\n          </li>\n        </ul>\n      </li>\n    </ul>\n\n    <!-- TheModal -->\n    <div v-if=\"selectedSeries\" class=\"modal-overlay\" @click=\"closeModal\">\n      <div class=\"modal-content\" @click.stop>\n        <TheModal :series=\"selectedSeries\" :isModalOpen=\"isModalOpen\" @close=\"closeModal\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TheModal from '../components/TheModal.vue';\nimport SkeletonLoader from '../components/SkeletonLoader.vue'\n\nexport default {\n  components: {\n    TheModal, SkeletonLoader,\n  },\n  data() {\n    return {\n      genres: [],\n      selectedGenre: null,\n      selectedSeries: null,\n      isModalOpen: false,\n      isSmallScreen: false,\n      loading: true,\n    };\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.checkScreenSize);\n  },\n  async mounted() {\n    this.fetchGenres();\n    this.checkScreenSize();\n    window.addEventListener('resize', this.checkScreenSize);\n  },\n  methods: {\n    async fetchGenres() {\n      try {\n        const apiKey = process.env.VUE_APP_API_KEY;\n        const response = await fetch(`https://api.themoviedb.org/3/genre/tv/list?api_key=${apiKey}&language=fr`);\n        const data = await response.json();\n\n        if (data.genres && data.genres.length > 0) {\n          for (const genre of data.genres) {\n            const seriesResponse = await this.fetchSeriesForGenre(genre.id, apiKey);\n            this.genres.push({\n              id: genre.id,\n              name: genre.name,\n              series: seriesResponse\n            });\n          }\n          if (this.genres.length > 0) {\n            this.selectedGenre = this.genres[0].id;\n          }\n          this.loading = false;\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération des genres et des séries associées :', error);\n      }\n    },\n    async fetchSeriesForGenre(genreId, apiKey) {\n      const seriesData = [];\n      // Récupérer les 50 premières pages de séries pour le genre donné\n      for (let page = 1; page <= 10; page++) {\n        const seriesResponse = await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${apiKey}&language=fr&with_genres=${genreId}&page=${page}`);\n        const seriesDataPage = await seriesResponse.json();\n        // Si aucune donnée n'est retournée pour la page actuelle, sortez de la boucle\n        if (!seriesDataPage.results || seriesDataPage.results.length === 0) break;\n        // Filtrer les séries qui ont un backdrop_path\n        const filteredSeries = seriesDataPage.results.filter(series => series.backdrop_path);\n        // Ajoutez les séries filtrées de la page actuelle à la liste de séries du genre\n        seriesData.push(...filteredSeries);\n      }\n      return seriesData;\n    },\n\n    showSeriesDetails(series) {\n      this.selectedSeries = series;\n      this.isModalOpen = true;\n    },\n    closeModal() {\n      this.selectedSeries = null;\n      this.isModalOpen = false;\n    },\n    filteredSeries(seriesList) {\n      return seriesList.filter(series => series.backdrop_path);\n    },\n    checkScreenSize() {\n      this.isSmallScreen = window.innerWidth <= 763\n    },\n  }\n};\n</script>\n","import { render } from \"./SeriesAffichage.vue?vue&type=template&id=91ad3698\"\nimport script from \"./SeriesAffichage.vue?vue&type=script&lang=js\"\nexport * from \"./SeriesAffichage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_SkeletonLoader","loading","$data","_hoisted_2","_hoisted_3","_hoisted_4","id","_cache","$event","selectedGenre","_Fragment","_renderList","genres","genre","index","key","value","name","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_normalizeClass","isSmallScreen","series","src","backdrop_path","alt","onClick","$options","showSeriesDetails","_hoisted_8","selectedSeries","args","closeModal","_withModifiers","_component_TheModal","isModalOpen","onClose","_createCommentVNode","components","TheModal","SkeletonLoader","data","beforeUnmount","window","removeEventListener","this","checkScreenSize","mounted","fetchGenres","addEventListener","methods","apiKey","process","response","fetch","json","length","seriesResponse","fetchSeriesForGenre","push","error","console","genreId","seriesData","page","seriesDataPage","results","filteredSeries","filter","seriesList","innerWidth","__exports__","render"],"sourceRoot":""}