"use strict";(self["webpackChunkclone_streaming"]=self["webpackChunkclone_streaming"]||[]).push([[688],{870:function(e,s,t){t.d(s,{A:function(){return u}});var l=t(6768);const a={key:0,class:"fixed top-0 left-0 w-full h-full flex justify-center items-center bg-gray-800 bg-opacity-90 flex flex-col z-50"},n=(0,l.Fv)('<div class="w-32 h-32 relative center" data-v-27b73250><div class="personnage" data-v-27b73250><div class="corps" data-v-27b73250></div><div class="jambe jambe-gauche" data-v-27b73250></div><div class="jambe jambe-droite" data-v-27b73250></div></div></div><p class="text-gray-600 text-lg mt-4" data-v-27b73250>Chargement en cours...</p>',2),r=[n];function i(e,s,t,n,i,o){return t.loading?((0,l.uX)(),(0,l.CE)("div",a,r)):(0,l.Q3)("",!0)}var o={name:"SkeletonLoader",props:{loading:{type:Boolean,required:!0}}},c=t(1241);const d=(0,c.A)(o,[["render",i],["__scopeId","data-v-27b73250"]]);var u=d},9688:function(e,s,t){t.r(s),t.d(s,{default:function(){return S}});var l=t(6768),a=t(4232),n=t(5130);const r={class:"mt-6 w-11/12 mx-auto"},i={key:0,class:"flex flex-row"},o=(0,l.Lk)("h1",{class:"text-4xl font-bold mb-6 ml-4"},"Séries",-1),c={key:0,class:"genre-menu ml-4 mt-4 mb-6 w-90 h-full text-black"},d=["value"],u={key:1,class:"grid grid-cols-1 gap-4"},g={class:"text-2xl text-gray-900 font-semibold mb-4 ml-8 text-gray-700"},h=["src","alt","onClick"];function p(e,s,t,p,m,f){const v=(0,l.g2)("SkeletonLoader"),b=(0,l.g2)("TheModal");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(v,{loading:m.loading},null,8,["loading"]),m.loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",i,[o,m.genres.length>0?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bo)((0,l.Lk)("select",{class:"bg-gray-200 opacity-50 rounded-l-full rounded-r-full w-8/12 mt-2",id:"genreSelect","onUpdate:modelValue":s[0]||(s[0]=e=>m.selectedGenre=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.genres,((e,s)=>((0,l.uX)(),(0,l.CE)("option",{key:s,value:e.id},(0,a.v_)(e.name),9,d)))),128))],512),[[n.u1,m.selectedGenre]])])):(0,l.Q3)("",!0)])),m.loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("ul",u,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.genres,((e,s)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("li",{key:s,class:"mb-8"},[(0,l.Lk)("h2",g,(0,a.v_)(e.name),1),(0,l.Lk)("ul",{class:(0,a.C4)(["affichage grid grid-cols-4 gap-2 ml-1 mr-1",{"grid-cols-2":m.isSmallScreen}])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.filteredSeries(e.series),(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id,class:"flex flex-col items-center rounded-lg shadow-lg p-2 hover:bg-gray-500 transition duration-300 ease-in-out relative"},[(0,l.Lk)("img",{src:"https://image.tmdb.org/t/p/w500/"+e.backdrop_path,alt:e.name,class:"series-poster rounded-lg cursor-pointer",onClick:s=>f.showSeriesDetails(e)},null,8,h)])))),128))],2)])),[[n.aG,m.selectedGenre===e.id]]))),128))])),m.selectedSeries?((0,l.uX)(),(0,l.CE)("div",{key:2,class:"modal-overlay",onClick:s[2]||(s[2]=(...e)=>f.closeModal&&f.closeModal(...e))},[(0,l.Lk)("div",{class:"modal-content",onClick:s[1]||(s[1]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{series:m.selectedSeries,isModalOpen:m.isModalOpen,onClose:f.closeModal},null,8,["series","isModalOpen","onClose"])])])):(0,l.Q3)("",!0)])}t(4114);var m=t(943),f=t(870),v={components:{TheModal:m.A,SkeletonLoader:f.A},data(){return{genres:[],selectedGenre:null,selectedSeries:null,isModalOpen:!1,isSmallScreen:!1,loading:!0}},beforeUnmount(){window.removeEventListener("resize",this.checkScreenSize)},async mounted(){await this.fetchGenres(),this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},methods:{async fetchGenres(){try{const e="3a18f97e67628cff439f21ac383dd600",s=await fetch(`https://api.themoviedb.org/3/genre/tv/list?api_key=${e}&language=fr`),t=await s.json();if(t.genres&&t.genres.length>0){const s=t.genres.map((async s=>{const t=await this.fetchSeriesForGenre(s.id,e);return{id:s.id,name:s.name,series:t}}));this.genres=await Promise.all(s),this.genres.length>0&&(this.selectedGenre=this.genres[0].id),this.loading=!1}}catch(e){console.error("Erreur lors de la récupération des genres et des séries associées :",e)}},async fetchSeriesForGenre(e,s){const t=[];for(let l=1;l<=30;l++){const a=await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${s}&language=fr&with_genres=${e}&page=${l}`),n=await a.json();if(!n.results||0===n.results.length)break;const r=n.results.filter((e=>e.backdrop_path));t.push(...r)}return t},showSeriesDetails(e){this.selectedSeries=e,this.isModalOpen=!0},closeModal(){this.selectedSeries=null,this.isModalOpen=!1},filteredSeries(e){return e.filter((e=>e.backdrop_path))},checkScreenSize(){this.isSmallScreen=window.innerWidth<=763}}},b=t(1241);const k=(0,b.A)(v,[["render",p]]);var S=k}}]);
//# sourceMappingURL=688.340deb70.js.map