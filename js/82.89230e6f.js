"use strict";(self["webpackChunkclone_streaming"]=self["webpackChunkclone_streaming"]||[]).push([[82],{8082:function(e,l,s){s.r(l),s.d(l,{default:function(){return M}});var n=s(6768),t=s(4232),o=s(5130);const i={class:"mt-6 w-11/12 mx-auto"},r={class:"flex flex-row"},a=(0,n.Lk)("h1",{class:"text-4xl font-bold mb-6 ml-4"},"Films",-1),c={class:"genre-menu ml-4 mt-4 mb-6 w-90 h-full text-black"},d=["value"],u={class:"grid grid-cols-1 gap-4"},h={class:"text-2xl text-gray-900 font-semibold mb-4 ml-8"},g=["src","alt","onClick"],m={key:1,class:"no-backdrop-placeholder"};function p(e,l,s,p,f,k){const v=(0,n.g2)("SkeletonLoader"),b=(0,n.g2)("TheModal");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(v,{loading:f.loading},null,8,["loading"]),(0,n.Lk)("div",r,[a,(0,n.Lk)("div",c,[(0,n.bo)((0,n.Lk)("select",{class:"bg-gray-200 opacity-50 rounded-l-full rounded-r-full w-8/12 mt-2",id:"genreSelect","onUpdate:modelValue":l[0]||(l[0]=e=>f.selectedGenre=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.genres,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.id},(0,t.v_)(e.name),9,d)))),128))],512),[[o.u1,f.selectedGenre]])])]),(0,n.Lk)("ul",u,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.genres,((e,l)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("li",{key:l,class:"mb-8"},[(0,n.Lk)("h2",h,(0,t.v_)(e.name),1),(0,n.Lk)("ul",{class:(0,t.C4)(["grid grid-cols-4 gap-2 ml-1 mr-1",{"grid-cols-2":f.isSmallScreen}])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.filteredMovies(e.movies),(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"flex flex-col items-center rounded-lg shadow-lg p-2 hover:bg-gray-500 transition duration-300 ease-in-out relative"},[e.backdrop_path?((0,n.uX)(),(0,n.CE)("img",{key:0,src:"https://image.tmdb.org/t/p/w500/"+e.backdrop_path,alt:e.title,class:"movie-poster rounded-lg cursor-pointer",onClick:l=>k.showModal(e)},null,8,g)):((0,n.uX)(),(0,n.CE)("div",m,"No Backdrop Image Available"))])))),128))],2)])),[[o.aG,f.selectedGenre===e.id]]))),128))]),(0,n.bF)(b,{movie:f.selectedMovie,isModalOpen:f.isModalOpen,onClose:k.closeModal},null,8,["movie","isModalOpen","onClose"])])}s(4114);var f=s(943),k=s(870),v={components:{TheModal:f.A,SkeletonLoader:k.A},data(){return{genres:[],selectedGenre:null,isModalOpen:!1,selectedMovie:null,isSmallScreen:!1,loading:!0}},async mounted(){this.fetchGenres(),this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},beforeUnmount(){window.removeEventListener("resize",this.checkScreenSize)},methods:{async fetchGenres(){try{const e="3a18f97e67628cff439f21ac383dd600",l=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${e}&language=fr`),s=await l.json();if(s.genres&&s.genres.length>0){for(const l of s.genres){const s=[];for(let n=1;n<=10;n++){const t=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${e}&language=fr&with_genres=${l.id}&page=${n}`),o=await t.json();if(!o.results||0===o.results.length)break;const i=o.results.filter((e=>null!==e.backdrop_path));s.push(...i)}this.genres.push({id:l.id,name:l.name,movies:s})}this.genres.length>0&&(this.selectedGenre=this.genres[0].id),this.loading=!1}}catch(e){console.error("Erreur lors de la récupération des genres et des films associés :",e)}},showModal(e){this.selectedMovie=e,this.isModalOpen=!0},closeModal(){this.selectedMovie=null,this.isModalOpen=!1},filteredMovies(e){return e.filter((e=>null!==e.backdrop_path))},checkScreenSize(){this.isSmallScreen=window.innerWidth<=763}}},b=s(1241);const w=(0,b.A)(v,[["render",p]]);var M=w}}]);
//# sourceMappingURL=82.89230e6f.js.map