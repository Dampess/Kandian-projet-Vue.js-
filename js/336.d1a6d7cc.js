"use strict";(self["webpackChunkclone_streaming"]=self["webpackChunkclone_streaming"]||[]).push([[336],{870:function(e,l,a){a.d(l,{A:function(){return u}});var s=a(6768);const t={key:0,class:"fixed top-0 left-0 w-full h-full flex justify-center items-center bg-gray-800 bg-opacity-90 flex flex-col z-50"},n=(0,s.Fv)('<div class="w-32 h-32 relative center" data-v-27b73250><div class="personnage" data-v-27b73250><div class="corps" data-v-27b73250></div><div class="jambe jambe-gauche" data-v-27b73250></div><div class="jambe jambe-droite" data-v-27b73250></div></div></div><p class="text-gray-600 text-lg mt-4" data-v-27b73250>Chargement en cours...</p>',2),i=[n];function o(e,l,a,n,o,r){return a.loading?((0,s.uX)(),(0,s.CE)("div",t,i)):(0,s.Q3)("",!0)}var r={name:"SkeletonLoader",props:{loading:{type:Boolean,required:!0}}},d=a(1241);const c=(0,d.A)(r,[["render",o],["__scopeId","data-v-27b73250"]]);var u=c},7336:function(e,l,a){a.r(l),a.d(l,{default:function(){return y}});var s=a(6768),t=a(4232),n=a(5130);const i={class:"mt-6 w-11/12 mx-auto"},o={key:0,class:"flex flex-row"},r=(0,s.Lk)("h1",{class:"text-4xl font-bold mb-6 ml-4"},"Films",-1),d={key:0,class:"genre-menu ml-4 mt-4 mb-6 w-90 h-full text-black"},c=["value"],u={key:1,class:"grid grid-cols-1 gap-4"},g={class:"text-2xl text-gray-700 font-semibold mb-4 ml-8"},h=["src","alt","onClick"],v={key:1,class:"no-backdrop-placeholder"};function m(e,l,a,m,p,f){const b=(0,s.g2)("SkeletonLoader"),k=(0,s.g2)("TheModal");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(b,{loading:p.loading},null,8,["loading"]),p.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",o,[r,p.genres.length>0?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bo)((0,s.Lk)("select",{class:"bg-gray-200 opacity-50 rounded-l-full rounded-r-full w-8/12 mt-2",id:"genreSelect","onUpdate:modelValue":l[0]||(l[0]=e=>p.selectedGenre=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(p.genres,((e,l)=>((0,s.uX)(),(0,s.CE)("option",{key:l,value:e.id},(0,t.v_)(e.name),9,c)))),128))],512),[[n.u1,p.selectedGenre]])])):(0,s.Q3)("",!0)])),p.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("ul",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(p.genres,((e,l)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:l,class:"mb-8"},[(0,s.Lk)("h2",g,(0,t.v_)(e.name),1),(0,s.Lk)("ul",{class:(0,t.C4)(["affichage grid grid-cols-4 gap-2 ml-1 mr-1",{"grid-cols-2":p.isSmallScreen}])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.filteredMovies(e.movies),(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"flex flex-col items-center rounded-lg shadow-lg p-2 hover:bg-gray-500 transition duration-300 ease-in-out relative"},[e.backdrop_path?((0,s.uX)(),(0,s.CE)("img",{key:0,src:"https://image.tmdb.org/t/p/w500/"+e.backdrop_path,alt:e.title,class:"movie-poster rounded-lg cursor-pointer",onClick:l=>f.showModal(e)},null,8,h)):((0,s.uX)(),(0,s.CE)("div",v,"No Backdrop Image Available"))])))),128))],2)])),[[n.aG,p.selectedGenre===e.id]]))),128))])),p.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(k,{key:2,movie:p.selectedMovie,isModalOpen:p.isModalOpen,onClose:f.closeModal},null,8,["movie","isModalOpen","onClose"]))])}a(4114);var p=a(943),f=a(870),b={components:{TheModal:p.A,SkeletonLoader:f.A},data(){return{genres:[],selectedGenre:null,isModalOpen:!1,selectedMovie:null,isSmallScreen:!1,loading:!0}},async mounted(){await this.fetchGenres(),this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},beforeUnmount(){window.removeEventListener("resize",this.checkScreenSize)},methods:{async fetchGenres(){try{const e="3a18f97e67628cff439f21ac383dd600",l=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${e}&language=fr&adult=false`),a=await l.json();if(a.genres&&a.genres.length>0){const l=a.genres.map((async l=>{const a=[];for(let s=1;s<=40;s++){const t=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${e}&language=fr&adult=false&with_genres=${l.id}&page=${s}`),n=await t.json();if(!n.results||0===n.results.length)break;const i=n.results.filter((e=>null!==e.backdrop_path));a.push(...i)}return{id:l.id,name:l.name,movies:a}}));this.genres=await Promise.all(l),this.genres.length>0&&(this.selectedGenre=this.genres[0].id),this.loading=!1}}catch(e){console.error("Erreur lors de la récupération des genres et des films associés :",e)}},showModal(e){this.selectedMovie=e,this.isModalOpen=!0},closeModal(){this.selectedMovie=null,this.isModalOpen=!1},filteredMovies(e){return e.filter((e=>null!==e.backdrop_path))},checkScreenSize(){this.isSmallScreen=window.innerWidth<=763}}},k=a(1241);const w=(0,k.A)(b,[["render",m]]);var y=w}}]);
//# sourceMappingURL=336.d1a6d7cc.js.map